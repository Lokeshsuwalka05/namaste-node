# ğŸŒ Server, Networking & Node.js Event Loop

## ğŸ”¹ What is a Server?

- A **server** is like a computer that has its own OS and runs different applications inside it.
- A server always **waits for a request** (via sockets or HTTP), and once a request comes, it responds with data (file, text, JSON, image, etc.).
- Example: Think about **AWS servers**. They are basically a hub of powerful computing machines where millions of clients make requests and get responses. AWS has huge data centers to handle all this.

---

## ğŸ”¹ Why not use our own computer as a server?

Technically, your computer **can act as a server**. But it has limitations:

- Limited **RAM** and **CPU power** (cannot handle thousands/millions of requests).
- Limited **network bandwidth** (your home Wi-Fi cannot serve millions of users).
- **No global availability** â€” your PC canâ€™t be accessed everywhere easily.
- **Reliability issues** â€” your system may crash, shut down, or overheat.
- **Security risks** â€” personal machines arenâ€™t hardened like cloud servers.

ğŸ‘‰ Thatâ€™s why companies prefer cloud providers like **AWS, GCP, Azure** â€” they offer scalability, reliability, and global access.

---

## ğŸ”¹ Types of Servers

- **HTTP Server** â†’ For websites & APIs (most common).
- **SMTP Server** â†’ For emails.
- **FTP Server** â†’ For file transfers.
- **Database Server** â†’ For storing/querying data.

ğŸ‘‰ But when we talk about **Web Servers**, we mostly mean **HTTP servers**.

---

## ğŸ”¹ How does Clientâ€“Server Communication Work?

The rules of communication are defined by **TCP/IP model** (practical) and **OSI model** (theoretical reference).

### âœ… Correct Flow of Data (when sending):

1. **Application Layer** â†’ Data is created (e.g., WhatsApp message, photo).  
   ğŸ‘‰ â€œData aaya Application Layer pe.â€

2. **Transport Layer (TCP/UDP)** â†’ Breaks the data into **segments**, adds **port numbers** and ensures reliability (TCP).  
   ğŸ‘‰ â€œData ko toda Transmission Layer ne.â€

3. **Internet Layer (IP)** â†’ Each segment gets a **source & destination IP address**, forming a **packet**.  
   ğŸ‘‰ â€œChunks ko IP diya Internet Layer ne.â€

4. **Network Access Layer (Link Layer)** â†’ Adds **MAC address** and defines the medium (Wi-Fi, Ethernet, 4G). Packets become **frames**.  
   ğŸ‘‰ â€œMedium define kiya Network Layer ne.â€

ğŸ“© On the **server side**, the process happens in reverse:  
`Network Access â†’ Internet â†’ Transport â†’ Application`

---

## ğŸ”¹ Example: When You Open `namastedev.com`

1. Your request first goes to a **DNS server**.
2. DNS resolves the domain name into an **IP address**.
3. With that IP, your browser sends an **HTTP request** to the server.
4. The server processes it and sends back the response (HTML/JSON/etc.).

---

## ğŸ”¹ Can I create multiple HTTP servers?

âœ… Yes! You can create as many as you want.  
But how do we differentiate them?

- By **Port Numbers**.
- So the combination of `(IP + Port)` uniquely identifies a server.

Example:

- `127.0.0.1:3000` â†’ First HTTP server
- `127.0.0.1:4000` â†’ Second HTTP server

---

## ğŸ”¹ Socket vs WebSocket

### ğŸ”¸ Normal Socket (TCP Socket)

- A **socket** = `(IP + Port)` = endpoint of communication.
- With **TCP sockets**:
  - Client connects to server.
  - Data is exchanged.
  - Connection may be **closed** or kept alive (depends on protocol).

Example:  
HTTP uses TCP socket on port 80/443.

- Client sends request â†’ Server sends response â†’ Connection usually closes (unless **keep-alive** is enabled).

---

### ğŸ”¸ WebSocket

- WebSocket is built **on top of TCP sockets**.
- Starts as an **HTTP handshake**, then â€œupgradesâ€ to WebSocket.
- Connection stays **open & persistent** (full-duplex).
- Both client & server can send messages anytime (without reconnecting).

Used for **real-time apps** like:

- WhatsApp Web
- Stock tickers
- Multiplayer games
- Live chat / Notifications

---

## ğŸ”¹ Node.js Event Loop Phases

The **event loop** handles asynchronous operations in Node.js. It has multiple phases:

1. **Timers Phase**  
   Executes callbacks from `setTimeout()` and `setInterval()`.

2. **Pending Callbacks Phase**  
   Executes I/O callbacks that were deferred (e.g., TCP errors).

3. **Idle, Prepare Phase**  
   Internal use only.

4. **Poll Phase**

   - Retrieves new I/O events.
   - Executes I/O callbacks (like `fs.readFile`).
   - If no timers are waiting, it will block here for new events.

5. **Check Phase**  
   Executes `setImmediate()` callbacks.

6. **Close Callbacks Phase**  
   Executes close event callbacks (e.g., `socket.on('close', ...)`).

---

## ğŸ”¹ Creating Servers in Node.js

- We can create servers using Node.js by using the **http module**, but it can become complicated for large apps.
- Thatâ€™s why we use **Express.js**, which is built on top of Node.js, and makes server creation easier.

---

## ğŸ”¹ Different Meanings of the Word â€œServerâ€

1. **Hardware Server**

   - A physical computer machine designed to serve many clients.
   - Has more RAM, CPU cores, storage, and high network capacity.
   - Example: Dell, HP, IBM machines in data centers.
   - **Purpose**: Handle multiple client requests.

2. **Software Server**

   - A program/application that acts as a server.
   - Examples:
     - Apache / Nginx â†’ Web servers
     - MySQL / PostgreSQL â†’ Database servers
     - Node.js `http` module
   - **Purpose**: Accept requests and send responses.

3. **Application Server**
   - A server designed to run applications for specific purposes.
   - Examples:
     - Tomcat â†’ Runs Java apps
     - Express.js app â†’ Runs Node.js applications
     - Spring Boot â†’ Runs enterprise Java apps

---

âœ… This covers: **Server basics, TCP/IP communication, multiple servers, sockets vs WebSockets, Node.js event loop, and types of servers (hardware/software/application).**
